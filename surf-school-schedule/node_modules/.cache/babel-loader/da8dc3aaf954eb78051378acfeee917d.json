{"ast":null,"code":"var _jsxFileName = \"/home/michal/Desktop/projekty/java/SurfSchoolSchedule/SurfSchoolSchedule/surf-school-schedule/src/components/Instructor/InstructorSettle.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { Card, Table, ButtonGroup, Button, InputGroup, FormControl, Form, Col } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faWallet, faMoneyCheckAlt, faUndo, faArrowLeft, faList } from '@fortawesome/free-solid-svg-icons';\nimport SuccessToast from '../SuccessToast';\nimport { connect } from 'react-redux';\nimport { fetchInstructor, updateInstructor } from './../../services/index';\nimport './../../style/Style.css';\n\nclass InstructorSettle extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.findWeekInstructorTab = idInstructor => {\n      axios.get(\"http://localhost:8080/weekInstructor-api/studentWeekInstructors/\" + idInstructor).then(response => {\n        if (response.data != null) {\n          this.setState({\n            weekInstructorTab: response.data.content\n          });\n        }\n      }).catch(error => {\n        console.error(\"Error: \" + error);\n      });\n    };\n\n    this.findWeekInstructor = (idInstructor, date) => {\n      axios.get(\"http://localhost:8080/weekInstructor-api/\" + idInstructor + \"/\" + date).then(response => {\n        if (response.data != null) {\n          this.setState({\n            weekInstructor: response.data\n          });\n        }\n      }).catch(error => {\n        console.error(\"Error: \" + error);\n      });\n    };\n\n    this.findInstructorById = idInstructor => {\n      this.props.fetchInstructor(idInstructor);\n      setTimeout(() => {\n        let instructor = this.props.instructor.instructor;\n\n        if (instructor != null) {\n          this.setState({\n            instructor: instructor\n          });\n        }\n      }, 1000);\n    };\n\n    this.settleChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.returnToInstructorList = () => {\n      return this.props.history.push(\"/instructors\");\n    };\n\n    this.settleInstructor = () => {\n      const weekInstructor = {\n        id: this.state.weekInstructor.id,\n        beginningDate: this.state.weekInstructor.beginningDate,\n        endDate: this.state.weekInstructor.endDate,\n        fullNrOfLessonsWeek: this.state.weekInstructor.fullNrOfLessonsWeek,\n        nrOfLessons1p: this.state.weekInstructor.nrOfLessons1p,\n        nrOfLessons2p: this.state.weekInstructor.nrOfLessons2p,\n        nrOfLessons3p: this.state.weekInstructor.nrOfLessons3p,\n        weekWage: this.state.weekInstructor.weekWage,\n        status: \"Settled\"\n      };\n      axios.put(\"http://localhost:8080/weekInstructor-api/\" + weekInstructor.id).then(response => {\n        if (response.data != null) {\n          this.setState({\n            \"showSuccesMessage\": true\n          });\n          setTimeout(() => this.setState({\n            \"showSuccessMessage\": false\n          }), 3000);\n          setTimeout(() => this.returnToInstructorList(), 1000);\n        } else {\n          this.setState({\n            \"showInvalidMessage\": true,\n            \"method\": \"post\"\n          });\n          setTimeout(() => this.setState({\n            \"showInvalidMessage\": false\n          }), 3000);\n        }\n      }).catch(error => {\n        console.error(\"Error: \" + error);\n      });\n    };\n\n    let today = new Date();\n    this.state = {\n      idInstructor: +this.props.match.params.id,\n      instructor: '',\n      weekInstructorTab: [],\n      weekInstructor: '',\n      showSuccessMessage: false,\n      showInvalidMessage: false,\n      date: today.getMonth() + 1 + '-' + today.getDate() + '-' + today.getFullYear()\n    };\n  }\n\n  componentDidMount() {\n    this.findInstructorById(this.state.idInstructor);\n    this.findWeekInstructorTab(this.state.idInstructor);\n    this.findWeekInstructor(this.state.idInstructor, this.state.date);\n  }\n\n  // listButtonHandle = () => {\n  //     this.setState({\n  //         showLessonList: !this.state.showLessonList\n  //     });\n  // }\n  render() {\n    const instructor = this.state.instructor;\n    const {\n      weekInstructorTab,\n      weekInstructor\n    } = this.state;\n    console.log(this.state);\n    const pageNumCss = {\n      width: \"45px\",\n      border: \"1px solid #F8F8FF\",\n      color: \"#F8F8FF\",\n      textAlign: \"center\",\n      fontWeight: \"bold\"\n    };\n    const searchBoxCss = {\n      width: \"100px\",\n      border: \"1px solid #17A2B8\",\n      color: \"#17A2B8\",\n      textAlign: \"center\",\n      fontWeight: \"bold\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        \"display\": this.state.show ? \"block\" : \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(SuccessToast, {\n      show: this.state.show,\n      message: \"Instructor Settled Successfully\",\n      type: \"success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        \"display\": this.state.showInvalidMessage ? \"block\" : \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(SuccessToast, {\n      show: this.state.showInvalidMessage,\n      message: \"Couldn't settle instructor\",\n      type: \"dangerNoSuccess\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(Card, {\n      className: \"border border-dark bg-dark text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Card.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faWallet,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 25\n      }\n    }), \" Settle Instructor\"), /*#__PURE__*/React.createElement(Form, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Card.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"container\",\n      style: {\n        \"clear\": \"both\",\n        \"display\": \"flex\",\n        \"justifyContent\": \"space-between\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 37\n      }\n    }, \"Instructor\"), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 37\n      }\n    }, instructor.firstName + \" \" + instructor.lastName), /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 37\n      }\n    }, \"Date (Monday - Sunday)\"), /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 37\n      }\n    }, weekInstructor.beginningDate, \" - \", weekInstructor.endDate), /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 37\n      }\n    }, \"Nr of Lessons This Week[h]\"), /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 37\n      }\n    }, weekInstructor.fullNrOfLessonsWeek), /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 37\n      }\n    }, \"(1p/2p/+3p)\"), /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 37\n      }\n    }, weekInstructor.nrOfLessons1p ? weekInstructor.nrOfLessons1p : 0, \" /\", weekInstructor.nrOfLessons2p ? weekInstructor.nrOfLessons2p : 0, \" /\", weekInstructor.nrOfLessons3p ? weekInstructor.nrOfLessons3p : 0, \" \"), /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 37\n      }\n    }, \" Week's Wage [zl]\"), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 37\n      }\n    }, weekInstructor.weekWage ? weekInstructor.weekWage : 0)), /*#__PURE__*/React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridWhichWeek\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 37\n      }\n    }, \"Choose Week\"), /*#__PURE__*/React.createElement(Form.Control, {\n      required: true,\n      as: \"select\",\n      autoComplete: \"off\",\n      name: \"weekInstructor\",\n      value: weekInstructor,\n      onChange: this.settleChange,\n      className: \"bg-dark text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 37\n      }\n    }, weekInstructorTab.filter(weekInstructor => weekInstructor.status === \"Not_Settled\").map(weekInstructor => /*#__PURE__*/React.createElement(\"option\", {\n      key: weekInstructor.id,\n      value: weekInstructor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 49\n      }\n    }, weekInstructor.beginningDate, \" - \", weekInstructor.endDate)))))), /*#__PURE__*/React.createElement(Card.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      size: \"sm\",\n      variant: \"info\",\n      onClick: () => this.settleInstructor(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faMoneyCheckAlt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 37\n      }\n    }), \"  Settle\"), \"     \", /*#__PURE__*/React.createElement(Button, {\n      size: \"sm\",\n      variant: \"light\",\n      type: \"button\",\n      onClick: () => this.returnToInstructorList(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faArrowLeft,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 37\n      }\n    }), \"  Return\"))))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    instructor: state.instructor\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    fetchInstructor: instructorId => dispatch(fetchInstructor(instructorId)),\n    updateInstructor: instructor => dispatch(updateInstructor(instructor))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InstructorSettle);","map":{"version":3,"sources":["/home/michal/Desktop/projekty/java/SurfSchoolSchedule/SurfSchoolSchedule/surf-school-schedule/src/components/Instructor/InstructorSettle.js"],"names":["React","axios","Link","Card","Table","ButtonGroup","Button","InputGroup","FormControl","Form","Col","FontAwesomeIcon","faWallet","faMoneyCheckAlt","faUndo","faArrowLeft","faList","SuccessToast","connect","fetchInstructor","updateInstructor","InstructorSettle","Component","constructor","props","findWeekInstructorTab","idInstructor","get","then","response","data","setState","weekInstructorTab","content","catch","error","console","findWeekInstructor","date","weekInstructor","findInstructorById","setTimeout","instructor","settleChange","event","target","name","value","returnToInstructorList","history","push","settleInstructor","id","state","beginningDate","endDate","fullNrOfLessonsWeek","nrOfLessons1p","nrOfLessons2p","nrOfLessons3p","weekWage","status","put","today","Date","match","params","showSuccessMessage","showInvalidMessage","getMonth","getDate","getFullYear","componentDidMount","render","log","pageNumCss","width","border","color","textAlign","fontWeight","searchBoxCss","show","firstName","lastName","filter","map","mapStateToProps","mapDispatchToProps","dispatch","instructorId"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { Card, Table, ButtonGroup, Button, InputGroup, FormControl, Form, Col } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faWallet, faMoneyCheckAlt, faUndo, faArrowLeft, faList } from '@fortawesome/free-solid-svg-icons';\nimport SuccessToast from '../SuccessToast';\nimport { connect } from 'react-redux';\nimport { fetchInstructor, updateInstructor } from './../../services/index';\n\nimport './../../style/Style.css';\n\n\nclass InstructorSettle extends React.Component {\n\n    constructor(props) {\n        super(props);\n        let today = new Date();\n        this.state = {\n            idInstructor: +this.props.match.params.id,\n            instructor: '',\n            weekInstructorTab: [],\n            weekInstructor: '',\n            showSuccessMessage: false,\n            showInvalidMessage: false,\n            date: today.getMonth() + 1 + '-' + today.getDate() + '-' + today.getFullYear()\n\n        };\n    }\n\n    componentDidMount() {\n        this.findInstructorById(this.state.idInstructor);\n        this.findWeekInstructorTab(this.state.idInstructor)\n        this.findWeekInstructor(this.state.idInstructor, this.state.date)\n    }\n\n    findWeekInstructorTab = (idInstructor) => {\n        axios.get(\"http://localhost:8080/weekInstructor-api/studentWeekInstructors/\" + idInstructor)\n            .then(response => {\n                if (response.data != null) {\n                    this.setState({\n                        weekInstructorTab: response.data.content\n                    });\n                }\n            }).catch((error) => {\n                console.error(\"Error: \" + error);\n            });\n    };\n\n    findWeekInstructor = (idInstructor, date) => {\n        axios.get(\"http://localhost:8080/weekInstructor-api/\" + idInstructor + \"/\" + date)\n            .then(response => {\n                if (response.data != null) {\n                    this.setState({\n                        weekInstructor: response.data\n                    });\n                }\n            }).catch((error) => {\n                console.error(\"Error: \" + error);\n            });\n    };\n\n\n\n    findInstructorById = (idInstructor) => {\n\n        this.props.fetchInstructor(idInstructor);\n        setTimeout(() => {\n\n            let instructor = this.props.instructor.instructor;\n            if (instructor != null) {\n                this.setState({\n                    instructor: instructor\n                });\n            }\n        }, 1000);\n    };\n\n\n    settleChange = event => {\n        this.setState({\n            [event.target.name]: event.target.value,\n        });\n    };\n\n    returnToInstructorList = () => {\n        return this.props.history.push(\"/instructors\");\n    };\n\n    settleInstructor = () => {\n        const weekInstructor = {\n            id: this.state.weekInstructor.id,\n            beginningDate: this.state.weekInstructor.beginningDate,\n            endDate: this.state.weekInstructor.endDate,\n            fullNrOfLessonsWeek: this.state.weekInstructor.fullNrOfLessonsWeek,\n            nrOfLessons1p: this.state.weekInstructor.nrOfLessons1p,\n            nrOfLessons2p: this.state.weekInstructor.nrOfLessons2p,\n            nrOfLessons3p: this.state.weekInstructor.nrOfLessons3p,\n            weekWage: this.state.weekInstructor.weekWage,\n            status: \"Settled\"\n        };\n\n        axios.put(\"http://localhost:8080/weekInstructor-api/\" + weekInstructor.id)\n            .then(response => {\n                if (response.data != null) {\n                    this.setState({ \"showSuccesMessage\": true });\n                    setTimeout(() => this.setState({ \"showSuccessMessage\": false }), 3000);\n                    setTimeout(() => this.returnToInstructorList(), 1000);\n                }\n                else {\n                    this.setState({ \"showInvalidMessage\": true, \"method\": \"post\" });\n                    setTimeout(() => this.setState({ \"showInvalidMessage\": false }), 3000);\n                }\n            }).catch((error) => {\n                console.error(\"Error: \" + error);\n            });\n    }\n\n    // listButtonHandle = () => {\n    //     this.setState({\n    //         showLessonList: !this.state.showLessonList\n    //     });\n    // }\n\n    render() {\n        const instructor = this.state.instructor;\n        const { weekInstructorTab, weekInstructor } = this.state\n\n        console.log(this.state)\n        const pageNumCss = {\n            width: \"45px\",\n            border: \"1px solid #F8F8FF\",\n            color: \"#F8F8FF\",\n            textAlign: \"center\",\n            fontWeight: \"bold\"\n        };\n\n        const searchBoxCss = {\n            width: \"100px\",\n            border: \"1px solid #17A2B8\",\n            color: \"#17A2B8\",\n            textAlign: \"center\",\n            fontWeight: \"bold\"\n        };\n\n        return (\n            <div>\n                <div style={{ \"display\": this.state.show ? \"block\" : \"none\" }}>\n                    <SuccessToast show={this.state.show} message={\"Instructor Settled Successfully\"} type=\"success\" />\n                </div>\n                <div style={{ \"display\": this.state.showInvalidMessage ? \"block\" : \"none\" }}>\n                    <SuccessToast show={this.state.showInvalidMessage} message={\"Couldn't settle instructor\"} type=\"dangerNoSuccess\" />\n                </div>\n\n                <Card className={\"border border-dark bg-dark text-white\"}>\n                    <Card.Header>\n                        <FontAwesomeIcon icon={faWallet} /> Settle Instructor\n                </Card.Header>\n                    <Form >\n                        <Card.Body>\n                            <div id=\"container\" style={{ \"clear\": \"both\", \"display\": \"flex\", \"justifyContent\": \"space-between\" }}>\n\n                                <div>\n                                    <h5>Instructor</h5>\n                                    <h4>{instructor.firstName + \" \" + instructor.lastName}</h4>\n\n                                    <h6>Date (Monday - Sunday)</h6>\n                                    <h5>{weekInstructor.beginningDate} - {weekInstructor.endDate}</h5>\n\n                                    <h6>Nr of Lessons This Week[h]</h6>\n                                    <h5>{weekInstructor.fullNrOfLessonsWeek}</h5>\n\n                                    <h6>(1p/2p/+3p)</h6>\n                                    <h5>{weekInstructor.nrOfLessons1p ? weekInstructor.nrOfLessons1p : 0} /\n                                    {weekInstructor.nrOfLessons2p ? weekInstructor.nrOfLessons2p : 0} /\n                                    {weekInstructor.nrOfLessons3p ? weekInstructor.nrOfLessons3p : 0} </h5>\n\n                                    <h5> Week's Wage [zl]</h5>\n                                    <h4>{weekInstructor.weekWage ? weekInstructor.weekWage : 0}</h4>\n\n                                </div>\n                                <Form.Group as={Col} controlId=\"formGridWhichWeek\">\n                                    <Form.Label>Choose Week</Form.Label>\n                                    <Form.Control required as=\"select\"\n                                        autoComplete=\"off\"\n                                        name=\"weekInstructor\"\n                                        value={weekInstructor}\n                                        onChange={this.settleChange}\n                                        className={\"bg-dark text-white\"}>\n                                        {weekInstructorTab.filter(weekInstructor =>\n                                            weekInstructor.status === \"Not_Settled\")\n                                            .map(weekInstructor =>\n                                                <option key={weekInstructor.id} value={weekInstructor}>\n                                                    {weekInstructor.beginningDate} - {weekInstructor.endDate}\n                                                </option>\n                                            )}\n                                    </Form.Control>\n                                </Form.Group>\n\n\n                            </div>\n\n                        </Card.Body>\n\n                        <Card.Footer>\n                            <div>\n                                <Button size=\"sm\" variant=\"info\" onClick={() => this.settleInstructor()}>\n                                    <FontAwesomeIcon icon={faMoneyCheckAlt} />  Settle\n                                    </Button>\n                                {\"     \"}\n                                <Button size=\"sm\" variant=\"light\" type=\"button\" onClick={() => this.returnToInstructorList()}>\n                                    <FontAwesomeIcon icon={faArrowLeft} />  Return\n                                     </Button>\n                            </div>\n                        </Card.Footer>\n                    </Form >\n\n\n                </Card >\n            </div>\n        );\n    }\n\n}\n\nconst mapStateToProps = state => {\n    return {\n        instructor: state.instructor,\n    }\n};\n\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        fetchInstructor: (instructorId) => dispatch(fetchInstructor(instructorId)),\n        updateInstructor: (instructor) => dispatch(updateInstructor(instructor))\n    }\n\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InstructorSettle);"]},"metadata":{},"sourceType":"module"}