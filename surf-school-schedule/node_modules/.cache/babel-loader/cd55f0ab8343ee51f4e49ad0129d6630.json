{"ast":null,"code":"var _jsxFileName = \"/home/michal/Desktop/projekty/java/SurfSchoolSchedule/SurfSchoolSchedule/surf-school-schedule/src/components/Student/StudentLessonsList.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { Modal, Card, Table, ButtonGroup, Button, InputGroup, FormControl } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faList, faWallet, faEdit, faTrash, faCalendarPlus, faStepBackward, faFastBackward, faStepForward, faFastForward, faSearch, faTimes, faCheckSquare } from '@fortawesome/free-solid-svg-icons';\nimport SuccessToast from '../SuccessToast';\nimport { connect } from 'react-redux';\nimport { deleteLesson, fetchAllLessonsForStudent, searchLessons, updateLesson } from './../../services/index';\nimport './../../style/Style.css';\n\nclass StudentSettle extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.lessonStatusChange = (lesson, newStatus) => {\n      lesson.status = newStatus;\n      this.props.updateLesson(lesson);\n      this.props.fetchAllLessonsForStudent(this.props.studentId, 0, 999999);\n    };\n  }\n\n  componentDidMount() {\n    //  const idStudent = this.props.studentId;\n    //this.props.fetchAllLessonsForStudent(this.props.studentId, 0, 999999);\n    setTimeout(() => {\n      this.checkIfLessonInThePast();\n    }, 99999900);\n  } //change status of lessons that have their date in the past (24 h back) and were not given into not given\n\n\n  checkIfLessonInThePast() {\n    let yesterday = new Date(new Date().setDate(new Date().getDate() - 1));\n    let length = this.props.lessons.length;\n    let renderFlag = false;\n\n    for (let i = 0; i < length; ++i) {\n      let temp = new Date(this.props.lessons[i].date);\n\n      if (this.props.lessons[i].status === \"To_Give\" && temp < yesterday) {\n        this.lessonStatusChange(this.props.lessons[i], 3); //flag so that component is not unnecessarily rendered \n\n        if (!renderFlag) renderFlag = true;\n      }\n    }\n\n    if (renderFlag) this.props.fetchAllLessonsForStudent(this.props.studentId, 0, 999999);\n  }\n\n  render() {\n    const searchedLesson = this.props.lesson.searchedLesson;\n    const totalPages = this.props.lesson.totalPages;\n    const totalElements = this.props.lesson.totalElements;\n    const lesson = this.props.lesson;\n    const lessons = this.props.lessons;\n    const currentPage = 0;\n    const pageNumCss = {\n      width: \"45px\",\n      border: \"1px solid #F8F8FF\",\n      color: \"#F8F8FF\",\n      textAlign: \"center\",\n      fontWeight: \"bold\"\n    };\n    const searchBoxCss = {\n      width: \"9999990px\",\n      border: \"1px solid #17A2B8\",\n      color: \"#17A2B8\",\n      textAlign: \"center\",\n      fontWeight: \"bold\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Modal, {\n      show: this.props.showLessonList,\n      onHide: () => this.props.onClose() //</div> onHide={() => this.resetAndCloseForm()}\n      // onShow={() => this.onShowHandle()}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Header, {\n      className: \"border border-light bg-dark text-white\",\n      closeButton: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        \"float\": \"left\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faList,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 29\n      }\n    }), \"  \", this.props.student.firstName, \" \", this.props.student.lastName, \"'s lessons list\")), /*#__PURE__*/React.createElement(Card, {\n      className: \" bg-dark text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Card.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Table, {\n      striped: true,\n      bordered: true,\n      hover: true,\n      variant: \"dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 41\n      }\n    }, \" Date \", /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 51\n      }\n    }), \" \"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 41\n      }\n    }, \"Time\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 41\n      }\n    }, \"How Long [h]\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 41\n      }\n    }, \"Nr of Students\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 41\n      }\n    }, \"Instructor \"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 41\n      }\n    }, \"Status\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 33\n      }\n    }, lessons.length === 0 ? /*#__PURE__*/React.createElement(\"tr\", {\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"999999\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 45\n      }\n    }, \" No Lessons in the Data Base\")) : lessons.filter(lesson => lesson.status == \"Finished_Unpaid\").map(lesson => /*#__PURE__*/React.createElement(\"tr\", {\n      key: lesson.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 53\n      }\n    }, lesson.date), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 53\n      }\n    }, lesson.time), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 53\n      }\n    }, lesson.howLong), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 53\n      }\n    }, lesson.nrStudents), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 53\n      }\n    }, lesson.instructor.firstName, \" \", lesson.instructor.lastName, \" \"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 53\n      }\n    }, lesson.status)))))), /*#__PURE__*/React.createElement(Card.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        \"float\": \"left\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 29\n      }\n    }, \"Page \", currentPage, \" of \", totalPages === 0 ? 1 : totalPages), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        \"float\": \"right\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(InputGroup, {\n      size: \"sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(InputGroup.Prepend, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"button\",\n      variant: \"outline-light\",\n      disabled: currentPage === 1 ? true : false,\n      onClick: this.firstPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faFastBackward,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 45\n      }\n    }), \" First\"), /*#__PURE__*/React.createElement(Button, {\n      type: \"button\",\n      variant: \"outline-light\",\n      disabled: currentPage === 1 ? true : false,\n      onClick: this.prevPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faStepBackward,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 45\n      }\n    }), \" Prev\")), /*#__PURE__*/React.createElement(FormControl, {\n      style: pageNumCss,\n      className: \"page-num bg-dark\",\n      name: \"currentPage\",\n      value: currentPage,\n      onChange: this.changePage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(InputGroup.Append, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"button\",\n      variant: \"outline-light\",\n      disabled: currentPage === totalPages ? true : false,\n      onClick: this.nextPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faStepForward,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 45\n      }\n    }), \" Next\"), /*#__PURE__*/React.createElement(Button, {\n      type: \"button\",\n      variant: \"outline-light\",\n      disabled: currentPage === totalPages ? true : false,\n      onClick: this.lastPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faFastForward,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 45\n      }\n    }), \" Last\"))))))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    lesson: state.lesson,\n    lessons: state.lesson.lessons,\n    totalPages: state.lesson.totalPages,\n    totalElements: state.lesson.totalElements,\n    currentPage: state.lesson.currentPage\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    fetchAllLessonsForStudent: (studentId, currentPage, size) => dispatch(fetchAllLessonsForStudent(studentId, currentPage, size)),\n    deleteLesson: lessonId => dispatch(deleteLesson(lessonId)),\n    searchLessons: (searchedLesson, currentPage, sizePage) => dispatch(searchLessons(searchedLesson, currentPage, sizePage)),\n    updateLesson: lesson => dispatch(updateLesson(lesson))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StudentSettle);","map":{"version":3,"sources":["/home/michal/Desktop/projekty/java/SurfSchoolSchedule/SurfSchoolSchedule/surf-school-schedule/src/components/Student/StudentLessonsList.js"],"names":["React","axios","Link","Modal","Card","Table","ButtonGroup","Button","InputGroup","FormControl","FontAwesomeIcon","faList","faWallet","faEdit","faTrash","faCalendarPlus","faStepBackward","faFastBackward","faStepForward","faFastForward","faSearch","faTimes","faCheckSquare","SuccessToast","connect","deleteLesson","fetchAllLessonsForStudent","searchLessons","updateLesson","StudentSettle","Component","constructor","props","lessonStatusChange","lesson","newStatus","status","studentId","componentDidMount","setTimeout","checkIfLessonInThePast","yesterday","Date","setDate","getDate","length","lessons","renderFlag","i","temp","date","render","searchedLesson","totalPages","totalElements","currentPage","pageNumCss","width","border","color","textAlign","fontWeight","searchBoxCss","showLessonList","onClose","student","firstName","lastName","filter","map","id","time","howLong","nrStudents","instructor","firstPage","prevPage","changePage","nextPage","lastPage","mapStateToProps","state","mapDispatchToProps","dispatch","size","lessonId","sizePage"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,KAAT,EAAgBC,IAAhB,EAAsBC,KAAtB,EAA6BC,WAA7B,EAA0CC,MAA1C,EAAkDC,UAAlD,EAA8DC,WAA9D,QAAiF,iBAAjF;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,SAASC,MAAT,EAAiBC,QAAjB,EAA2BC,MAA3B,EAAmCC,OAAnC,EAA4CC,cAA5C,EAA4DC,cAA5D,EAA4EC,cAA5E,EAA4FC,aAA5F,EAA2GC,aAA3G,EAA0HC,QAA1H,EAAoIC,OAApI,EAA6IC,aAA7I,QAAkK,mCAAlK;AACA,OAAOC,YAAP,MAAyB,iBAAzB;AAEA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,YAAT,EAAuBC,yBAAvB,EAAkDC,aAAlD,EAAiEC,YAAjE,QAAqF,wBAArF;AAEA,OAAO,yBAAP;;AAGA,MAAMC,aAAN,SAA4B7B,KAAK,CAAC8B,SAAlC,CAA4C;AAExCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SA+GnBC,kBA/GmB,GA+GE,CAACC,MAAD,EAASC,SAAT,KAAuB;AACxCD,MAAAA,MAAM,CAACE,MAAP,GAAgBD,SAAhB;AACA,WAAKH,KAAL,CAAWJ,YAAX,CAAwBM,MAAxB;AACA,WAAKF,KAAL,CAAWN,yBAAX,CAAqC,KAAKM,KAAL,CAAWK,SAAhD,EAA2D,CAA3D,EAA8D,MAA9D;AACH,KAnHkB;AAElB;;AAEDC,EAAAA,iBAAiB,GAAG;AAChB;AAEA;AACAC,IAAAA,UAAU,CAAC,MAAM;AACb,WAAKC,sBAAL;AACH,KAFS,EAEP,QAFO,CAAV;AAGH,GAbuC,CAgBxC;;;AACAA,EAAAA,sBAAsB,GAAG;AACrB,QAAIC,SAAS,GAAG,IAAIC,IAAJ,CAAS,IAAIA,IAAJ,GAAWC,OAAX,CAAmB,IAAID,IAAJ,GAAWE,OAAX,KAAuB,CAA1C,CAAT,CAAhB;AAEA,QAAIC,MAAM,GAAG,KAAKb,KAAL,CAAWc,OAAX,CAAmBD,MAAhC;AACA,QAAIE,UAAU,GAAG,KAAjB;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,MAApB,EAA4B,EAAEG,CAA9B,EAAiC;AAC7B,UAAIC,IAAI,GAAG,IAAIP,IAAJ,CAAS,KAAKV,KAAL,CAAWc,OAAX,CAAmBE,CAAnB,EAAsBE,IAA/B,CAAX;;AACA,UAAI,KAAKlB,KAAL,CAAWc,OAAX,CAAmBE,CAAnB,EAAsBZ,MAAtB,KAAiC,SAAjC,IAA8Ca,IAAI,GAAGR,SAAzD,EAAoE;AAChE,aAAKR,kBAAL,CAAwB,KAAKD,KAAL,CAAWc,OAAX,CAAmBE,CAAnB,CAAxB,EAA+C,CAA/C,EADgE,CAEhE;;AACA,YAAI,CAACD,UAAL,EACIA,UAAU,GAAG,IAAb;AACP;AACJ;;AACD,QAAIA,UAAJ,EACI,KAAKf,KAAL,CAAWN,yBAAX,CAAqC,KAAKM,KAAL,CAAWK,SAAhD,EAA2D,CAA3D,EAA8D,MAA9D;AACP;;AAwFDc,EAAAA,MAAM,GAAG;AACL,UAAMC,cAAc,GAAG,KAAKpB,KAAL,CAAWE,MAAX,CAAkBkB,cAAzC;AACA,UAAMC,UAAU,GAAG,KAAKrB,KAAL,CAAWE,MAAX,CAAkBmB,UAArC;AACA,UAAMC,aAAa,GAAG,KAAKtB,KAAL,CAAWE,MAAX,CAAkBoB,aAAxC;AACA,UAAMpB,MAAM,GAAG,KAAKF,KAAL,CAAWE,MAA1B;AACA,UAAMY,OAAO,GAAG,KAAKd,KAAL,CAAWc,OAA3B;AACA,UAAMS,WAAW,GAAG,CAApB;AAEA,UAAMC,UAAU,GAAG;AACfC,MAAAA,KAAK,EAAE,MADQ;AAEfC,MAAAA,MAAM,EAAE,mBAFO;AAGfC,MAAAA,KAAK,EAAE,SAHQ;AAIfC,MAAAA,SAAS,EAAE,QAJI;AAKfC,MAAAA,UAAU,EAAE;AALG,KAAnB;AAQA,UAAMC,YAAY,GAAG;AACjBL,MAAAA,KAAK,EAAE,WADU;AAEjBC,MAAAA,MAAM,EAAE,mBAFS;AAGjBC,MAAAA,KAAK,EAAE,SAHU;AAIjBC,MAAAA,SAAS,EAAE,QAJM;AAKjBC,MAAAA,UAAU,EAAE;AALK,KAArB;AASA,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAE,KAAK7B,KAAL,CAAW+B,cAAxB;AAAwC,MAAA,MAAM,EAAE,MAAM,KAAK/B,KAAL,CAAWgC,OAAX,EAAtD,CACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAII,oBAAC,KAAD,CAAO,MAAP;AAAc,MAAA,SAAS,EAAE,wCAAzB;AAAmE,MAAA,WAAW,MAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEI;AAAK,MAAA,KAAK,EAAE;AAAE,iBAAS;AAAX,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,eAAD;AAAiB,MAAA,IAAI,EAAErD,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,QACwC,KAAKqB,KAAL,CAAWiC,OAAX,CAAmBC,SAD3D,OACuE,KAAKlC,KAAL,CAAWiC,OAAX,CAAmBE,QAD1F,oBAFJ,CAJJ,eAYI,oBAAC,IAAD;AAAM,MAAA,SAAS,EAAE,qBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEI,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD;AAAO,MAAA,OAAO,MAAd;AAAe,MAAA,QAAQ,MAAvB;AAAwB,MAAA,KAAK,MAA7B;AAA8B,MAAA,OAAO,EAAC,MAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAV,MADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAHJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAJJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBALJ,eAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBANJ,CADJ,CADJ,eAaI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKrB,OAAO,CAACD,MAAR,KAAmB,CAAnB,gBACG;AAAI,MAAA,KAAK,EAAC,QAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAI,MAAA,OAAO,EAAC,QAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCADJ,CADH,GAKGC,OAAO,CAACsB,MAAR,CAAelC,MAAM,IACjBA,MAAM,CAACE,MAAP,IAAiB,iBADrB,EAEKiC,GAFL,CAESnC,MAAM,iBACP;AAAI,MAAA,GAAG,EAAEA,MAAM,CAACoC,EAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKpC,MAAM,CAACgB,IAAZ,CADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKhB,MAAM,CAACqC,IAAZ,CAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKrC,MAAM,CAACsC,OAAZ,CAHJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKtC,MAAM,CAACuC,UAAZ,CAJJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKvC,MAAM,CAACwC,UAAP,CAAkBR,SAAvB,OAAmChC,MAAM,CAACwC,UAAP,CAAkBP,QAArD,MALJ,eAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKjC,MAAM,CAACE,MAAZ,CANJ,CAHR,CANR,CAbJ,CADJ,CAFJ,eAuCI,oBAAC,IAAD,CAAM,MAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,KAAK,EAAE;AAAE,iBAAS;AAAX,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBACUmB,WADV,UAC2BF,UAAU,KAAK,CAAf,GAAmB,CAAnB,GAAuBA,UADlD,CADJ,eAKI;AAAK,MAAA,KAAK,EAAE;AAAE,iBAAS;AAAX,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,UAAD;AAAY,MAAA,IAAI,EAAC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,UAAD,CAAY,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,OAAO,EAAC,eAA9B;AAA8C,MAAA,QAAQ,EAAEE,WAAW,KAAK,CAAhB,GAAoB,IAApB,GAA2B,KAAnF;AACI,MAAA,OAAO,EAAE,KAAKoB,SADlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEI,oBAAC,eAAD;AAAiB,MAAA,IAAI,EAAE1D,cAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,WADJ,eAKI,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,OAAO,EAAC,eAA9B;AAA8C,MAAA,QAAQ,EAAEsC,WAAW,KAAK,CAAhB,GAAoB,IAApB,GAA2B,KAAnF;AACI,MAAA,OAAO,EAAE,KAAKqB,QADlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEI,oBAAC,eAAD;AAAiB,MAAA,IAAI,EAAE5D,cAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,UALJ,CADJ,eAWI,oBAAC,WAAD;AAAa,MAAA,KAAK,EAAEwC,UAApB;AAAgC,MAAA,SAAS,EAAE,kBAA3C;AAA+D,MAAA,IAAI,EAAC,aAApE;AAAkF,MAAA,KAAK,EAAED,WAAzF;AACI,MAAA,QAAQ,EAAE,KAAKsB,UADnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAXJ,eAaI,oBAAC,UAAD,CAAY,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,OAAO,EAAC,eAA9B;AAA8C,MAAA,QAAQ,EAAEtB,WAAW,KAAKF,UAAhB,GAA6B,IAA7B,GAAoC,KAA5F;AACI,MAAA,OAAO,EAAE,KAAKyB,QADlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEI,oBAAC,eAAD;AAAiB,MAAA,IAAI,EAAE5D,aAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,UADJ,eAKI,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,OAAO,EAAC,eAA9B;AAA8C,MAAA,QAAQ,EAAEqC,WAAW,KAAKF,UAAhB,GAA6B,IAA7B,GAAoC,KAA5F;AACI,MAAA,OAAO,EAAE,KAAK0B,QADlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEI,oBAAC,eAAD;AAAiB,MAAA,IAAI,EAAE5D,aAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,UALJ,CAbJ,CADJ,CALJ,CAvCJ,CAZJ,CADJ,CADJ;AA0FH;;AA5OuC;;AAgP5C,MAAM6D,eAAe,GAAGC,KAAK,IAAI;AAC7B,SAAO;AACH/C,IAAAA,MAAM,EAAE+C,KAAK,CAAC/C,MADX;AAEHY,IAAAA,OAAO,EAAEmC,KAAK,CAAC/C,MAAN,CAAaY,OAFnB;AAGHO,IAAAA,UAAU,EAAE4B,KAAK,CAAC/C,MAAN,CAAamB,UAHtB;AAIHC,IAAAA,aAAa,EAAE2B,KAAK,CAAC/C,MAAN,CAAaoB,aAJzB;AAKHC,IAAAA,WAAW,EAAE0B,KAAK,CAAC/C,MAAN,CAAaqB;AALvB,GAAP;AAOH,CARD;;AAWA,MAAM2B,kBAAkB,GAAGC,QAAQ,IAAI;AACnC,SAAO;AACHzD,IAAAA,yBAAyB,EAAE,CAACW,SAAD,EAAYkB,WAAZ,EAAyB6B,IAAzB,KAAkCD,QAAQ,CAACzD,yBAAyB,CAACW,SAAD,EAAYkB,WAAZ,EAAyB6B,IAAzB,CAA1B,CADlE;AAEH3D,IAAAA,YAAY,EAAG4D,QAAD,IAAcF,QAAQ,CAAC1D,YAAY,CAAC4D,QAAD,CAAb,CAFjC;AAGH1D,IAAAA,aAAa,EAAE,CAACyB,cAAD,EAAiBG,WAAjB,EAA8B+B,QAA9B,KAA2CH,QAAQ,CAACxD,aAAa,CAACyB,cAAD,EAAiBG,WAAjB,EAA8B+B,QAA9B,CAAd,CAH/D;AAIH1D,IAAAA,YAAY,EAAGM,MAAD,IAAYiD,QAAQ,CAACvD,YAAY,CAACM,MAAD,CAAb;AAJ/B,GAAP;AAOH,CARD;;AAWA,eAAeV,OAAO,CAACwD,eAAD,EAAkBE,kBAAlB,CAAP,CAA6CrD,aAA7C,CAAf","sourcesContent":["import React from 'react';\n\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { Modal, Card, Table, ButtonGroup, Button, InputGroup, FormControl } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faList, faWallet, faEdit, faTrash, faCalendarPlus, faStepBackward, faFastBackward, faStepForward, faFastForward, faSearch, faTimes, faCheckSquare } from '@fortawesome/free-solid-svg-icons';\nimport SuccessToast from '../SuccessToast';\n\nimport { connect } from 'react-redux';\nimport { deleteLesson, fetchAllLessonsForStudent, searchLessons, updateLesson } from './../../services/index';\n\nimport './../../style/Style.css';\n\n\nclass StudentSettle extends React.Component {\n\n    constructor(props) {\n        super(props);\n    }\n\n    componentDidMount() {\n        //  const idStudent = this.props.studentId;\n\n        //this.props.fetchAllLessonsForStudent(this.props.studentId, 0, 999999);\n        setTimeout(() => {\n            this.checkIfLessonInThePast();\n        }, 99999900)\n    }\n\n\n    //change status of lessons that have their date in the past (24 h back) and were not given into not given\n    checkIfLessonInThePast() {\n        let yesterday = new Date(new Date().setDate(new Date().getDate() - 1));\n\n        let length = this.props.lessons.length;\n        let renderFlag = false;\n        for (let i = 0; i < length; ++i) {\n            let temp = new Date(this.props.lessons[i].date);\n            if (this.props.lessons[i].status === \"To_Give\" && temp < yesterday) {\n                this.lessonStatusChange(this.props.lessons[i], 3)\n                //flag so that component is not unnecessarily rendered \n                if (!renderFlag)\n                    renderFlag = true;\n            }\n        }\n        if (renderFlag)\n            this.props.fetchAllLessonsForStudent(this.props.studentId, 0, 999999);\n    };\n\n    // changePage = event => {\n    //     let target = parseInt(event.target.value);\n    //     if (this.props.lesson.searchedLesson) {\n    //         this.searchLesson(target)\n    //     } else {\n    //         let sortDirection = this.state.sortToggle ? \"asc\" : \"desc\";\n    //         this.props.fetchAllLessonsForStudent(this.props.studentId, target, 999999);\n    //     }\n    //     this.setState({\n    //         [event.target.name]: target\n    //     });\n\n    // };\n\n    // firstPage = () => {\n    //     let firstPage = 1;\n\n    //     if (0 > firstPage) {\n    //         0 = 1;\n    //         if (this.props.lesson.searchedLesson) {\n    //             this.searchLesson(0)\n    //         } else {\n    //             let sortDirection = this.state.sortToggle ? \"asc\" : \"desc\";\n    //             this.props.fetchAllLessonsForStudent(this.props.studentId, 0, 999999);\n    //         }\n    //     }\n    // };\n\n    // prevPage = () => {\n    //     if (0 > 1) {\n    //         --0;\n    //         if (this.props.lesson.searchedLesson) {\n    //             this.searchLesson(0)\n    //         } else {\n    //             let sortDirection = this.state.sortToggle ? \"asc\" : \"desc\";\n    //             this.props.fetchAllLessonsForStudent(this.props.studentId, 0, 999999);\n    //         }\n    //     }\n    // };\n\n    // lastPage = () => {\n    //     let lessonsLength = this.state.lessons.length;\n    //     let lastPage = Math.ceil(this.props.totalElements / 999999);\n    //     if (0 < lastPage) {\n    //         0 = lastPage;\n    //         if (this.props.lesson.searchedLesson) {\n    //             this.searchLesson(0)\n    //         } else {\n    //             this.props.fetchAllLessonsForStudent(this.props.studentId, 0, 999999);\n    //         }\n    //     }\n    // };\n\n    // nextPage = () => {\n    //     if (this.state.currentPage < Math.ceil(this.props.totalElements / 999999)) {\n    //         ++0;\n\n    //         if (this.props.lesson.searchedLesson) {\n    //             this.searchLesson(0)\n    //         } else {\n    //             let sortDirection = this.state.sortToggle ? \"asc\" : \"desc\";\n    //             this.props.fetchAllLessonsForStudent(this.props.studentId, 0, 999999);\n    //         }\n    //     }\n    // };\n\n    // searchChange = event => {\n    //     this.props.lesson.searchedLesson = event.target.value;\n    //     this.forceUpdate();\n    // };\n\n    // cancelSearch = () => {\n    //     this.props.lesson.searchedLesson = '';\n    //     this.props.fetchAllLessonsForStudent(this.props.studentId, 0, 999999);\n    //     this.forceUpdate();\n    // };\n\n\n    lessonStatusChange = (lesson, newStatus) => {\n        lesson.status = newStatus;\n        this.props.updateLesson(lesson);\n        this.props.fetchAllLessonsForStudent(this.props.studentId, 0, 999999);\n    }\n\n\n\n    render() {\n        const searchedLesson = this.props.lesson.searchedLesson;\n        const totalPages = this.props.lesson.totalPages;\n        const totalElements = this.props.lesson.totalElements;\n        const lesson = this.props.lesson;\n        const lessons = this.props.lessons;\n        const currentPage = 0;\n\n        const pageNumCss = {\n            width: \"45px\",\n            border: \"1px solid #F8F8FF\",\n            color: \"#F8F8FF\",\n            textAlign: \"center\",\n            fontWeight: \"bold\"\n        };\n\n        const searchBoxCss = {\n            width: \"9999990px\",\n            border: \"1px solid #17A2B8\",\n            color: \"#17A2B8\",\n            textAlign: \"center\",\n            fontWeight: \"bold\"\n        };\n\n\n        return (\n            <div>\n                <Modal show={this.props.showLessonList} onHide={() => this.props.onClose()}\n                //</div> onHide={() => this.resetAndCloseForm()}\n                // onShow={() => this.onShowHandle()}\n                >\n                    <Modal.Header className={\"border border-light bg-dark text-white\"} closeButton>\n\n                        <div style={{ \"float\": \"left\" }}>\n                            <FontAwesomeIcon icon={faList} />  {this.props.student.firstName} {this.props.student.lastName}'s lessons list\n                        </div>\n\n\n                    </Modal.Header>\n                    <Card className={\" bg-dark text-white\"}>\n\n                        <Card.Body>\n                            <Table striped bordered hover variant=\"dark\">\n                                <thead>\n                                    <tr>\n                                        <th> Date <div /> </th>\n                                        <th>Time</th>\n                                        <th>How Long [h]</th>\n                                        <th>Nr of Students</th>\n                                        <th>Instructor </th>\n                                        <th>Status</th>\n                                    </tr>\n                                </thead>\n\n\n                                <tbody>\n                                    {lessons.length === 0 ?\n                                        <tr align=\"center\">\n                                            <td colSpan=\"999999\"> No Lessons in the Data Base</td>\n                                        </tr> :\n\n                                        lessons.filter(lesson =>\n                                            lesson.status == \"Finished_Unpaid\")\n                                            .map(lesson => (\n                                                <tr key={lesson.id}>\n                                                    <td>{lesson.date}</td>\n                                                    <td>{lesson.time}</td>\n                                                    <td>{lesson.howLong}</td>\n                                                    <td>{lesson.nrStudents}</td>\n                                                    <td>{lesson.instructor.firstName} {lesson.instructor.lastName} </td>\n                                                    <td>{lesson.status}</td>\n\n                                                </tr>\n                                            ))\n                                    }\n                                </tbody>\n                            </Table>\n                        </Card.Body>\n                        <Card.Footer>\n                            <div style={{ \"float\": \"left\" }}>\n                                Page {currentPage} of {totalPages === 0 ? 1 : totalPages}\n                            </div>\n\n                            <div style={{ \"float\": \"right\" }}>\n                                <InputGroup size=\"sm\">\n                                    <InputGroup.Prepend>\n                                        <Button type=\"button\" variant=\"outline-light\" disabled={currentPage === 1 ? true : false}\n                                            onClick={this.firstPage}>\n                                            <FontAwesomeIcon icon={faFastBackward} /> First\n                                            </Button>\n                                        <Button type=\"button\" variant=\"outline-light\" disabled={currentPage === 1 ? true : false}\n                                            onClick={this.prevPage}>\n                                            <FontAwesomeIcon icon={faStepBackward} /> Prev\n                                            </Button>\n                                    </InputGroup.Prepend>\n                                    <FormControl style={pageNumCss} className={\"page-num bg-dark\"} name=\"currentPage\" value={currentPage}\n                                        onChange={this.changePage} />\n                                    <InputGroup.Append>\n                                        <Button type=\"button\" variant=\"outline-light\" disabled={currentPage === totalPages ? true : false}\n                                            onClick={this.nextPage}>\n                                            <FontAwesomeIcon icon={faStepForward} /> Next\n                                            </Button>\n                                        <Button type=\"button\" variant=\"outline-light\" disabled={currentPage === totalPages ? true : false}\n                                            onClick={this.lastPage}>\n                                            <FontAwesomeIcon icon={faFastForward} /> Last\n                                            </Button>\n                                    </InputGroup.Append>\n                                </InputGroup>\n                            </div>\n\n                        </Card.Footer>\n                    </Card>\n                </Modal>\n            </div>\n        );\n    }\n\n}\n\nconst mapStateToProps = state => {\n    return {\n        lesson: state.lesson,\n        lessons: state.lesson.lessons,\n        totalPages: state.lesson.totalPages,\n        totalElements: state.lesson.totalElements,\n        currentPage: state.lesson.currentPage,\n    }\n};\n\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        fetchAllLessonsForStudent: (studentId, currentPage, size) => dispatch(fetchAllLessonsForStudent(studentId, currentPage, size)),\n        deleteLesson: (lessonId) => dispatch(deleteLesson(lessonId)),\n        searchLessons: (searchedLesson, currentPage, sizePage) => dispatch(searchLessons(searchedLesson, currentPage, sizePage)),\n        updateLesson: (lesson) => dispatch(updateLesson(lesson))\n    }\n\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StudentSettle);"]},"metadata":{},"sourceType":"module"}