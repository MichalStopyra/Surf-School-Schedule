{"ast":null,"code":"import _defineProperty from\"/home/michal/Desktop/projekty/java/SurfSchoolSchedule/SurfSchoolSchedule/surf-school-schedule/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/michal/Desktop/projekty/java/SurfSchoolSchedule/SurfSchoolSchedule/surf-school-schedule/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/michal/Desktop/projekty/java/SurfSchoolSchedule/SurfSchoolSchedule/surf-school-schedule/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/michal/Desktop/projekty/java/SurfSchoolSchedule/SurfSchoolSchedule/surf-school-schedule/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/michal/Desktop/projekty/java/SurfSchoolSchedule/SurfSchoolSchedule/surf-school-schedule/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{Link}from'react-router-dom';import{Card,Table,ButtonGroup,Button,InputGroup,FormControl,Form,Col}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faWallet,faMoneyCheckAlt,faUndo,faArrowLeft,faList}from'@fortawesome/free-solid-svg-icons';import SuccessToast from'../SuccessToast';import{connect}from'react-redux';import{fetchInstructor as _fetchInstructor,updateInstructor as _updateInstructor}from'./../../services/index';import'./../../style/Style.css';var InstructorSettle=/*#__PURE__*/function(_React$Component){_inherits(InstructorSettle,_React$Component);var _super=_createSuper(InstructorSettle);function InstructorSettle(props){var _this;_classCallCheck(this,InstructorSettle);_this=_super.call(this,props);_this.findWeekInstructorTab=function(idInstructor){axios.get(\"http://localhost:8080/weekInstructor-api/studentWeekInstructors/\"+idInstructor).then(function(response){if(response.data!=null){_this.setState({weekInstructorTab:response.data.content});}}).catch(function(error){console.error(\"Error: \"+error);});};_this.findWeekInstructor=function(idInstructor,date){axios.get(\"http://localhost:8080/weekInstructor-api/\"+idInstructor+\"/\"+date).then(function(response){if(response.data!=null){_this.setState({weekInstructor:response.data});}}).catch(function(error){console.error(\"Error: \"+error);});};_this.findInstructorById=function(idInstructor){_this.props.fetchInstructor(idInstructor);setTimeout(function(){var instructor=_this.props.instructor.instructor;if(instructor!=null){_this.setState({instructor:instructor});}},1000);};_this.settleChange=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.returnToInstructorList=function(){return _this.props.history.push(\"/instructors\");};_this.settleInstructor=function(){var weekInstructor={id:_this.state.weekInstructor.id,instructor:_this.state.instructor,beginningDate:_this.state.weekInstructor.beginningDate,endDate:_this.state.weekInstructor.endDate,fullNrOfLessonsWeek:_this.state.weekInstructor.fullNrOfLessonsWeek,nrOfLessons1p:_this.state.weekInstructor.nrOfLessons1p,nrOfLessons2p:_this.state.weekInstructor.nrOfLessons2p,nrOfLessons3p:_this.state.weekInstructor.nrOfLessons3p,weekWage:_this.state.weekInstructor.weekWage,status:1};axios.put(\"http://localhost:8080/weekInstructor-api/\"+weekInstructor.id,weekInstructor).then(function(response){if(response.data!=null){_this.setState({\"showSuccesMessage\":true});setTimeout(function(){return _this.setState({\"showSuccessMessage\":false});},3000);setTimeout(function(){return _this.returnToInstructorList();},2000);}else{_this.setState({\"showInvalidMessage\":true,\"method\":\"post\"});setTimeout(function(){return _this.setState({\"showInvalidMessage\":false});},3000);}}).catch(function(error){console.error(\"Error: \"+error);});};var today=new Date();_this.state={idInstructor:+_this.props.match.params.id,instructor:'',weekInstructorTab:[],weekInstructor:'',showSuccessMessage:false,showInvalidMessage:false,date:today.getMonth()+1+'-'+today.getDate()+'-'+today.getFullYear()};return _this;}_createClass(InstructorSettle,[{key:\"componentDidMount\",value:function componentDidMount(){this.findInstructorById(this.state.idInstructor);this.findWeekInstructorTab(this.state.idInstructor);this.findWeekInstructor(this.state.idInstructor,this.state.date);}},{key:\"render\",// listButtonHandle = () => {\n//     this.setState({\n//         showLessonList: !this.state.showLessonList\n//     });\n// }\nvalue:function render(){var _this2=this;var instructor=this.state.instructor;var _this$state=this.state,weekInstructorTab=_this$state.weekInstructorTab,weekInstructor=_this$state.weekInstructor;var pageNumCss={width:\"45px\",border:\"1px solid #F8F8FF\",color:\"#F8F8FF\",textAlign:\"center\",fontWeight:\"bold\"};var searchBoxCss={width:\"100px\",border:\"1px solid #17A2B8\",color:\"#17A2B8\",textAlign:\"center\",fontWeight:\"bold\"};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{style:{\"display\":this.state.showSuccessMessage?\"block\":\"none\"}},/*#__PURE__*/React.createElement(SuccessToast,{show:this.state.showSuccessMessage,message:\"Instructor Settled Successfully\",type:\"success\"})),/*#__PURE__*/React.createElement(\"div\",{style:{\"display\":this.state.showInvalidMessage?\"block\":\"none\"}},/*#__PURE__*/React.createElement(SuccessToast,{show:this.state.showInvalidMessage,message:\"Couldn't settle instructor\",type:\"dangerNoSuccess\"})),/*#__PURE__*/React.createElement(Card,{className:\"border border-dark bg-dark text-white\"},/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faWallet}),\" Settle Instructor\"),/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(\"div\",{id:\"container\",style:{\"clear\":\"both\",\"display\":\"flex\",\"justifyContent\":\"space-between\"}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h5\",null,\"Instructor\"),/*#__PURE__*/React.createElement(\"h4\",null,instructor.firstName+\" \"+instructor.lastName),/*#__PURE__*/React.createElement(\"h6\",null,\"Date (Monday - Sunday)\"),/*#__PURE__*/React.createElement(\"h5\",null,weekInstructor.beginningDate,\" - \",weekInstructor.endDate),/*#__PURE__*/React.createElement(\"h6\",null,\"Nr of Lessons This Week[h]\"),/*#__PURE__*/React.createElement(\"h5\",null,weekInstructor.fullNrOfLessonsWeek),/*#__PURE__*/React.createElement(\"h6\",null,\"(1p/2p/+3p)\"),/*#__PURE__*/React.createElement(\"h5\",null,weekInstructor.nrOfLessons1p?weekInstructor.nrOfLessons1p:0,\" /\",weekInstructor.nrOfLessons2p?weekInstructor.nrOfLessons2p:0,\" /\",weekInstructor.nrOfLessons3p?weekInstructor.nrOfLessons3p:0,\" \"),/*#__PURE__*/React.createElement(\"h5\",null,\" Week's Wage [zl]\"),/*#__PURE__*/React.createElement(\"h4\",null,weekInstructor.weekWage?weekInstructor.weekWage:0)),/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"formGridWhichWeek\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Choose Week\"),/*#__PURE__*/React.createElement(Form.Control,{required:true,as:\"select\",autoComplete:\"off\",name:\"weekInstructor\",value:weekInstructor,onChange:this.settleChange,className:\"bg-dark text-white\"},weekInstructorTab.filter(function(weekInstructor){return weekInstructor.status===\"Not_Settled\";}).map(function(weekInstructor){return/*#__PURE__*/React.createElement(\"option\",{key:weekInstructor.id,value:weekInstructor},weekInstructor.beginningDate,\" - \",weekInstructor.endDate);}))))),/*#__PURE__*/React.createElement(Card.Footer,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{size:\"sm\",variant:\"info\",onClick:function onClick(){return _this2.settleInstructor();}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faMoneyCheckAlt}),\"  Settle\"),\"     \",/*#__PURE__*/React.createElement(Button,{size:\"sm\",variant:\"light\",type:\"button\",onClick:function onClick(){return _this2.returnToInstructorList();}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faArrowLeft}),\"  Return\"))))));}}]);return InstructorSettle;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{instructor:state.instructor};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{fetchInstructor:function fetchInstructor(instructorId){return dispatch(_fetchInstructor(instructorId));},updateInstructor:function updateInstructor(instructor){return dispatch(_updateInstructor(instructor));}};};export default connect(mapStateToProps,mapDispatchToProps)(InstructorSettle);","map":{"version":3,"sources":["/home/michal/Desktop/projekty/java/SurfSchoolSchedule/SurfSchoolSchedule/surf-school-schedule/src/components/Instructor/InstructorSettle.js"],"names":["React","axios","Link","Card","Table","ButtonGroup","Button","InputGroup","FormControl","Form","Col","FontAwesomeIcon","faWallet","faMoneyCheckAlt","faUndo","faArrowLeft","faList","SuccessToast","connect","fetchInstructor","updateInstructor","InstructorSettle","props","findWeekInstructorTab","idInstructor","get","then","response","data","setState","weekInstructorTab","content","catch","error","console","findWeekInstructor","date","weekInstructor","findInstructorById","setTimeout","instructor","settleChange","event","target","name","value","returnToInstructorList","history","push","settleInstructor","id","state","beginningDate","endDate","fullNrOfLessonsWeek","nrOfLessons1p","nrOfLessons2p","nrOfLessons3p","weekWage","status","put","today","Date","match","params","showSuccessMessage","showInvalidMessage","getMonth","getDate","getFullYear","pageNumCss","width","border","color","textAlign","fontWeight","searchBoxCss","firstName","lastName","filter","map","Component","mapStateToProps","mapDispatchToProps","dispatch","instructorId"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { Card, Table, ButtonGroup, Button, InputGroup, FormControl, Form, Col } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faWallet, faMoneyCheckAlt, faUndo, faArrowLeft, faList } from '@fortawesome/free-solid-svg-icons';\nimport SuccessToast from '../SuccessToast';\nimport { connect } from 'react-redux';\nimport { fetchInstructor, updateInstructor } from './../../services/index';\n\nimport './../../style/Style.css';\n\n\nclass InstructorSettle extends React.Component {\n\n    constructor(props) {\n        super(props);\n        let today = new Date();\n        this.state = {\n            idInstructor: +this.props.match.params.id,\n            instructor: '',\n            weekInstructorTab: [],\n            weekInstructor: '',\n            showSuccessMessage: false,\n            showInvalidMessage: false,\n            date: today.getMonth() + 1 + '-' + today.getDate() + '-' + today.getFullYear()\n\n        };\n    }\n\n    componentDidMount() {\n        this.findInstructorById(this.state.idInstructor);\n        this.findWeekInstructorTab(this.state.idInstructor)\n        this.findWeekInstructor(this.state.idInstructor, this.state.date)\n    }\n\n    findWeekInstructorTab = (idInstructor) => {\n        axios.get(\"http://localhost:8080/weekInstructor-api/studentWeekInstructors/\" + idInstructor)\n            .then(response => {\n                if (response.data != null) {\n                    this.setState({\n                        weekInstructorTab: response.data.content\n                    });\n                }\n            }).catch((error) => {\n                console.error(\"Error: \" + error);\n            });\n    };\n\n    findWeekInstructor = (idInstructor, date) => {\n        axios.get(\"http://localhost:8080/weekInstructor-api/\" + idInstructor + \"/\" + date)\n            .then(response => {\n                if (response.data != null) {\n                    this.setState({\n                        weekInstructor: response.data\n                    });\n                }\n            }).catch((error) => {\n                console.error(\"Error: \" + error);\n            });\n    };\n\n\n\n    findInstructorById = (idInstructor) => {\n\n        this.props.fetchInstructor(idInstructor);\n        setTimeout(() => {\n\n            let instructor = this.props.instructor.instructor;\n            if (instructor != null) {\n                this.setState({\n                    instructor: instructor\n                });\n            }\n        }, 1000);\n    };\n\n\n    settleChange = event => {\n        this.setState({\n            [event.target.name]: event.target.value,\n        });\n    };\n\n    returnToInstructorList = () => {\n        return this.props.history.push(\"/instructors\");\n    };\n\n    settleInstructor = () => {\n        const weekInstructor = {\n            id: this.state.weekInstructor.id,\n            instructor: this.state.instructor,\n            beginningDate: this.state.weekInstructor.beginningDate,\n            endDate: this.state.weekInstructor.endDate,\n            fullNrOfLessonsWeek: this.state.weekInstructor.fullNrOfLessonsWeek,\n            nrOfLessons1p: this.state.weekInstructor.nrOfLessons1p,\n            nrOfLessons2p: this.state.weekInstructor.nrOfLessons2p,\n            nrOfLessons3p: this.state.weekInstructor.nrOfLessons3p,\n            weekWage: this.state.weekInstructor.weekWage,\n            status: 1\n        };\n\n        axios.put(\"http://localhost:8080/weekInstructor-api/\" + weekInstructor.id, weekInstructor)\n            .then(response => {\n                if (response.data != null) {\n                    this.setState({ \"showSuccesMessage\": true });\n                    setTimeout(() => this.setState({ \"showSuccessMessage\": false }), 3000);\n                    setTimeout(() => this.returnToInstructorList(), 2000);\n                }\n                else {\n                    this.setState({ \"showInvalidMessage\": true, \"method\": \"post\" });\n                    setTimeout(() => this.setState({ \"showInvalidMessage\": false }), 3000);\n                }\n            }).catch((error) => {\n                console.error(\"Error: \" + error);\n            });\n    }\n\n    // listButtonHandle = () => {\n    //     this.setState({\n    //         showLessonList: !this.state.showLessonList\n    //     });\n    // }\n\n    render() {\n        const instructor = this.state.instructor;\n        const { weekInstructorTab, weekInstructor } = this.state\n\n        const pageNumCss = {\n            width: \"45px\",\n            border: \"1px solid #F8F8FF\",\n            color: \"#F8F8FF\",\n            textAlign: \"center\",\n            fontWeight: \"bold\"\n        };\n\n        const searchBoxCss = {\n            width: \"100px\",\n            border: \"1px solid #17A2B8\",\n            color: \"#17A2B8\",\n            textAlign: \"center\",\n            fontWeight: \"bold\"\n        };\n\n        return (\n            <div>\n                <div style={{ \"display\": this.state.showSuccessMessage ? \"block\" : \"none\" }}>\n                    <SuccessToast show={this.state.showSuccessMessage} message={\"Instructor Settled Successfully\"} type=\"success\" />\n                </div>\n                <div style={{ \"display\": this.state.showInvalidMessage ? \"block\" : \"none\" }}>\n                    <SuccessToast show={this.state.showInvalidMessage} message={\"Couldn't settle instructor\"} type=\"dangerNoSuccess\" />\n                </div>\n\n                <Card className={\"border border-dark bg-dark text-white\"}>\n                    <Card.Header>\n                        <FontAwesomeIcon icon={faWallet} /> Settle Instructor\n                </Card.Header>\n                    <Form >\n                        <Card.Body>\n                            <div id=\"container\" style={{ \"clear\": \"both\", \"display\": \"flex\", \"justifyContent\": \"space-between\" }}>\n\n                                <div>\n                                    <h5>Instructor</h5>\n                                    <h4>{instructor.firstName + \" \" + instructor.lastName}</h4>\n\n                                    <h6>Date (Monday - Sunday)</h6>\n                                    <h5>{weekInstructor.beginningDate} - {weekInstructor.endDate}</h5>\n\n                                    <h6>Nr of Lessons This Week[h]</h6>\n                                    <h5>{weekInstructor.fullNrOfLessonsWeek}</h5>\n\n                                    <h6>(1p/2p/+3p)</h6>\n                                    <h5>{weekInstructor.nrOfLessons1p ? weekInstructor.nrOfLessons1p : 0} /\n                                    {weekInstructor.nrOfLessons2p ? weekInstructor.nrOfLessons2p : 0} /\n                                    {weekInstructor.nrOfLessons3p ? weekInstructor.nrOfLessons3p : 0} </h5>\n\n                                    <h5> Week's Wage [zl]</h5>\n                                    <h4>{weekInstructor.weekWage ? weekInstructor.weekWage : 0}</h4>\n\n                                </div>\n                                <Form.Group as={Col} controlId=\"formGridWhichWeek\">\n                                    <Form.Label>Choose Week</Form.Label>\n                                    <Form.Control required as=\"select\"\n                                        autoComplete=\"off\"\n                                        name=\"weekInstructor\"\n                                        value={weekInstructor}\n                                        onChange={this.settleChange}\n                                        className={\"bg-dark text-white\"}>\n                                        {weekInstructorTab.filter(weekInstructor =>\n                                            weekInstructor.status === \"Not_Settled\")\n                                            .map(weekInstructor =>\n                                                <option key={weekInstructor.id} value={weekInstructor}>\n                                                    {weekInstructor.beginningDate} - {weekInstructor.endDate}\n                                                </option>\n                                            )}\n                                    </Form.Control>\n                                </Form.Group>\n\n\n                            </div>\n\n                        </Card.Body>\n\n                        <Card.Footer>\n                            <div>\n                                <Button size=\"sm\" variant=\"info\" onClick={() => this.settleInstructor()}>\n                                    <FontAwesomeIcon icon={faMoneyCheckAlt} />  Settle\n                                    </Button>\n                                {\"     \"}\n                                <Button size=\"sm\" variant=\"light\" type=\"button\" onClick={() => this.returnToInstructorList()}>\n                                    <FontAwesomeIcon icon={faArrowLeft} />  Return\n                                     </Button>\n                            </div>\n                        </Card.Footer>\n                    </Form >\n\n\n                </Card >\n            </div>\n        );\n    }\n\n}\n\nconst mapStateToProps = state => {\n    return {\n        instructor: state.instructor,\n    }\n};\n\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        fetchInstructor: (instructorId) => dispatch(fetchInstructor(instructorId)),\n        updateInstructor: (instructor) => dispatch(updateInstructor(instructor))\n    }\n\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InstructorSettle);"]},"metadata":{},"sourceType":"module"}